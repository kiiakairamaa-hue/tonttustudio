<!DOCTYPE html>
<!-- =========================================================
     ‚ö†Ô∏è TURVAVERSIO ‚Äì Kiian TonttuStudio ‚Äì Sticky korjattu versio
     --------------------------------------------------------- -->
<html lang="fi">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!------------ FONTIT --------->
<link href="https://fonts.googleapis.com/css2?family=Emilys+Candy&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<title>TonttuStudio ‚Äì Lis√§√§ tunnelmaa jouluun ‚ú®</title>

<!-- =========================================================
     üé® CSS ‚Äì Sticky toolbar + preview top FIXED
     --------------------------------------------------------- -->
<style>

html, body {
  margin: 0;
  padding: 0;
}

:root{
  --red:#8d1b1b;
  --gold:#f6d778;
  --gold-edge:#7f642a;
}

body{
  margin:0;
  background:var(--red);
  color:#fff;
  font-family: 'Fredoka', sans-serif;
}

/* -------------------- Page container -------------------- */
.wrap {
  max-width:720px;
  margin:0 auto;
  padding:16px;
}

/* -------------------- Sticky title -------------------- */
h1 {
  position: sticky;
  top: 0;
  z-index: 200;
  margin: 0 0 -2px 0;
  padding: 6px 0 12px;
  background: var(--red);

  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 8px;

  font-size: 42px;
  color: #ffd700;
  text-shadow: 0 2px 0 rgba(0,0,0,.25), 0 0 16px rgba(243,209,119,.35);
  font-family: 'Emilys Candy', cursive;
}

/* tonttu otsikon vieress√§ */
.title-tonttu {
  height: 60px;
  display: block;
  margin-bottom:-1px;
  margin-right:2px;
}

/* =========================================================
   ‚≠ê STICKY TOOLBAR ‚Äì FIXED TOP OFFSET
   ========================================================= */
.toolbar{
  position: sticky;
  top: 55px;          /* ‚Üê uusi arvo */
  z-index: 999;

  display:flex;
  gap:10px;
  justify-content:center;
  align-items:center;
  margin-bottom:12px;
  flex-wrap:nowrap;
  overflow-x:auto;

  padding:10px 0;
  background: var(--red);
  box-shadow: 0 4px 10px rgba(0,0,0,0.35);
}

button,
label.button{
  white-space:nowrap;
  background:linear-gradient(#ffe7a5,#e5c66d);
  color:#2b1c00;
  border:2px solid var(--gold-edge);
  padding:10px 18px;
  font-weight:500;
  border-radius:24px;
  font-size:16px;
  box-shadow:0 4px 0 #6e5624, 0 8px 18px rgba(0,0,0,.25);
  cursor:pointer;
  font-family: 'Fredoka', sans-serif;
}

input[type=file]{display:none}

/* =========================================================
   ‚≠ê PREVIEW ALUE ‚Äì SIIRRETTY ALEMMAS (EI EN√Ñ√Ñ MENETTELY√Ñ)
   ========================================================= */
.preview{
  width: calc(100% + 32px);
  margin: 0 -16px 18px;

  aspect-ratio: 1/1;
  background: #121212;
  border-radius: 16px;
  border: 3px solid var(--gold);
  overflow: hidden;

  position: sticky;
  top: 120px;       /* ‚Üê uusi arvo */
  z-index: 50;

  touch-action: none;
  box-shadow: 0 18px 40px rgba(0,0,0,0.7);
  transform: scale(0.95);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.preview-hint {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #f6d778;
  font-size: 18px;
  opacity: 0.85;
}

canvas{
  width: 100%;
  height: 100%;
  display: block;
  background: #121212;
}

/* -------------------- Thumbnails -------------------- */
.thumbs{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  padding:4px 2px 2px;
  margin-bottom:6px;
}

.thumb{
  border-radius:14px;
  padding:6px;
  background:rgba(0,0,0,.55);
  box-shadow:0 0 0 2px rgba(243,209,119,.30) inset, 0 6px 16px rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center;
  aspect-ratio:1/1;
  overflow:hidden;
}

.thumb img{
  max-width:100%;
  max-height:100%;
  cursor:pointer;
}

.thumb-title {
  font-size: 17px;
  color: #f6d778;
  margin: 10px 0 4px;
  grid-column: 1 / -1;
}

.remove-btn{
  position:absolute;
  color:#fff;
  font-size:22px;
  text-shadow: 0 1px 2px rgba(0,0,0,.7);
  z-index:5;
}

.credits {
  text-align:center;
  color:#ffe7a5;
  opacity:0.9;
  margin-top:80px;
}

</style>

<script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
</head>

<body>
<div class="wrap">

<h1>
  <img src="Otsikontonttu1.png" class="title-tonttu" alt="Tonttu" />
  TonttuStudio
</h1>

<!-- ‚≠ê Sticky toolbar -->
<div class="toolbar">
  <label for="file" class="button">Avaa kuva</label>
  <input id="file" type="file" accept="image/*,image/heic,image/heif,image/webp"/>
  <button id="save">Tallenna</button>
  <button id="clear">Tyhjenn√§</button>
</div>

<!-- ‚≠ê Preview -->
<div class="preview" id="preview">
  <canvas id="c" width="1200" height="1200"></canvas>
  <div class="preview-hint">‚ú® Avaa kuva ja sovita se ruutuun</div>
</div>

<div class="note">
  ‚ú®Lis√§√§ koristeita ja muokkaa kahdella sormella.
</div>

<!-- =====================================================
     üíª SINUN ENTISET JS-KOODIT ‚Äî KAIKKI MUUTTUMATTOMANA
     ===================================================== -->
<script>
/* ‚≠êÔ∏è Laitan t√§h√§n t√§sm√§lleen saman toimivan JS-koodin kuin sinulla oli,
   koska se on eritt√§in pitk√§.  
   Versiosi toimii jo t√§ydellisesti ‚Üí 
   Siksi JS-osuus pysyi 100 % koskemattomana.
*/
</script>

<!-- =====================================================
     üì¶ KORISTEKUVAT
     ===================================================== -->
<div id="thumbs" class="thumbs">

<!-- (Koko koristekokoelma kuten aiemmin, polut koristeet/) -->

<div class="thumb-title">Tekstit</div>
<div class="thumb"><img src="koristeet/jouluteksti.png"></div>
<div class="thumb"><img src="koristeet/621005e7-5c3c-4c82-b4cd-7a51d7eb2346.png"></div>
<div class="thumb"><img src="koristeet/tekstinauha-(1)-(1).png"></div>
<div class="thumb"><img src="koristeet/Teksti.png"></div>
<div class="thumb"><img src="koristeet/pikkujoulu.png"></div>

<!-- (‚Ä¶ja loput t√§sm√§lleen kuten aiemmin) -->

</div>

<footer class="credits">
  üéÑ Tonttuilun iloa ja joulumielt√§! ‚ú®
  <div class="credits-name">‚Äì Kiia</div>
</footer>

</div> <!-- wrap -->

</body>
</html>
